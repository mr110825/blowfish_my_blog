---
title: "仮想マシンとハイパーバイザの基礎知識"
date: 2026-01-22T07:50:41+09:00
draft: false
tags: ["TIL", "仮想化", "インフラ"]
---

## 今日学んだこと

仮想マシンの概要と、構築方式である「ホストOS型」と「ハイパーバイザ型」の違いについて学びました。

## 学習内容

### 仮想マシンとは

仮想マシン（Virtual Machine）とは、**物理的なコンピュータの中に、ソフトウェアで作られた「もう一台のコンピュータ」**のことです。1つのコンピュータで複数のコンピュータ環境を構築できるため、大規模かつ柔軟な環境構築が可能になります。

### 仮想マシンの構築方式

仮想マシンを作る方式は大きく分けて2つあります。

#### ホストOS型（Type 2）

既に動作しているコンピュータ（ホストOS）の上に仮想化ソフトをインストールし、その上で仮想マシンを動かす方式です。

```text
┌─────────────────────────────────┐
│  アプリケーション                 │
├─────────────────────────────────┤
│  ゲストOS                        │
├─────────────────────────────────┤
│  仮想化ソフト                     │  ← VirtualBox, VMware Workstationなど
├─────────────────────────────────┤
│  ホストOS                        │  ← Windows, macOS, Linuxなど
├─────────────────────────────────┤
│  ハードウェア / インフラストラクチャ │
└─────────────────────────────────┘
```

**特徴：**

- ホストOSが必要
- 導入が簡単（普段使っているPCにVirtualBoxなどをインストールするだけ）
- ホストOSを経由するためオーバーヘッドが発生する

**代表的な製品：** VirtualBox、VMware Workstation、Parallels Desktop

#### ハイパーバイザ型（Type 1）

ハードウェアに直接ハイパーバイザをインストールし、その上で仮想マシンを動かす方式です。ホストOSは不要で、「ベアメタル型」とも呼ばれます。

```text
┌─────────────────────────────────┐
│  アプリケーション                 │
├─────────────────────────────────┤
│  ゲストOS                        │  ← ユーザーが使うのはここ
├─────────────────────────────────┤
│  ハイパーバイザ                   │  ← VMware ESXi, Hyper-V, KVMなど
├─────────────────────────────────┤
│  ハードウェア / インフラストラクチャ │
└─────────────────────────────────┘
```

**特徴：**

- ホストOSが不要（ベアメタル＝むき出しの金属の上に直接載せる）
- ホストOSを経由しないため高パフォーマンス
- 大規模な仮想化環境に適している

**代表的な製品：** VMware ESXi、Microsoft Hyper-V、KVM、Xen

### Type番号の由来

Type番号は「ハードウェアから数えて何番目で仮想化が行われるか」を示しています。

- **Type 1**: ハードウェア → [ハイパーバイザ] ← 1番目で仮想化
- **Type 2**: ハードウェア → ホストOS → [仮想化ソフト] ← 2番目で仮想化

Type 1はハイパーバイザがハードウェアを直接制御するため「ハイパーバイザ型」、Type 2は仮想化ソフトがホストOS上のアプリとして動くため「ホストOS型」と呼ばれます。

### ハイパーバイザの役割

ハイパーバイザは「OSの代わり」ではなく、**「複数のOSを同時に動かすための土台」**という役割を持っています。ユーザーが直接操作するのはゲストOSであり、ハイパーバイザは複数の仮想マシンを作成・管理するための専用ソフトです。

## まとめ

| 方式 | ホストOS | パフォーマンス | 用途 |
|------|---------|--------------|------|
| ホストOS型（Type 2） | 必要 | オーバーヘッドあり | 個人利用、手軽な検証 |
| ハイパーバイザ型（Type 1） | 不要 | 高い | 大規模環境、本番運用 |

- 仮想マシンとは、物理コンピュータの中にソフトウェアで作られた「もう一台のコンピュータ」
- ホストOS型は導入が簡単だが、ホストOSを経由するためオーバーヘッドが発生する
- ハイパーバイザ型はハードウェアに直接インストールするため高パフォーマンス
- 一般的に「ハイパーバイザ」と言えば、ホストOSを必要としないType 1を指すことが多い
